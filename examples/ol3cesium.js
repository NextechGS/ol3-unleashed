(function(){var k,l=this;function n(a){return void 0!==a}
function q(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function aa(a){var b=q(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function ba(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var t="closure_uid_"+(1E9*Math.random()>>>0),ca=0;function da(a,b,c){return a.call.apply(a.bind,arguments)}
function ea(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function u(a,b,c){u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?da:ea;return u.apply(null,arguments)}
function v(a,b){var c=a.split("."),d=l;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&n(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}function fa(a,b){function c(){}c.prototype=b.prototype;a.Q=b.prototype;a.prototype=new c;a.R=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function ga(a){if(!ha.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ia,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ja,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ka,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(la,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(ma,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(na,"&#0;"));return a}var ia=/&/g,ja=/</g,ka=/>/g,la=/"/g,ma=/'/g,na=/\x00/g,ha=/[\x00&<>"']/;function x(a,b){return a<b?-1:a>b?1:0};function oa(){};var y=Array.prototype,pa=y.indexOf?function(a,b,c){return y.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},A=y.forEach?function(a,b,c){y.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function qa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};var B;a:{var ra=l.navigator;if(ra){var sa=ra.userAgent;if(sa){B=sa;break a}}B=""};var ta=-1!=B.indexOf("Opera")||-1!=B.indexOf("OPR"),C=-1!=B.indexOf("Trident")||-1!=B.indexOf("MSIE"),D=-1!=B.indexOf("Gecko")&&-1==B.toLowerCase().indexOf("webkit")&&!(-1!=B.indexOf("Trident")||-1!=B.indexOf("MSIE")),E=-1!=B.toLowerCase().indexOf("webkit");function ua(){var a=l.document;return a?a.documentMode:void 0}
var va=function(){var a="",b;if(ta&&l.opera)return a=l.opera.version,"function"==q(a)?a():a;D?b=/rv\:([^\);]+)(\)|;)/:C?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:E&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(B))?a[1]:"");return C&&(b=ua(),b>parseFloat(a))?String(b):a}(),wa={};
function F(a){var b;if(!(b=wa[a])){b=0;for(var c=String(va).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",L=RegExp("(\\d*)(\\D*)","g"),s=RegExp("(\\d*)(\\D*)","g");do{var w=L.exec(g)||["","",""],p=s.exec(h)||["","",""];if(0==w[0].length&&0==p[0].length)break;b=x(0==w[1].length?0:parseInt(w[1],10),0==p[1].length?0:parseInt(p[1],10))||x(0==w[2].length,0==p[2].length)||
x(w[2],p[2])}while(0==b)}b=wa[a]=0<=b}return b}var xa=l.document,G=xa&&C?ua()||("CSS1Compat"==xa.compatMode?parseInt(va,10):5):void 0;var ya=!C||C&&9<=G,za=C&&!F("9");!E||F("528");D&&F("1.9b")||C&&F("8")||ta&&F("9.5")||E&&F("528");D&&!F("8")||C&&F("9");function H(a,b){this.type=a;this.a=this.b=b}H.prototype.c=function(){};function J(a){J[" "](a);return a}J[" "]=function(){};function K(a,b){H.call(this,a?a.type:"");this.d=this.a=this.b=null;if(a){this.type=a.type;this.b=a.target||a.srcElement;this.a=b;var c=a.relatedTarget;if(c&&D)try{J(c.nodeName)}catch(d){}this.d=a;a.defaultPrevented&&this.c()}}fa(K,H);K.prototype.c=function(){K.Q.c.call(this);var a=this.d;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,za)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Aa="closure_listenable_"+(1E6*Math.random()|0),Ba=0;function Ca(a,b,c,d,e){this.k=a;this.proxy=null;this.src=b;this.type=c;this.o=!!d;this.a=e;++Ba;this.l=this.n=!1}function Da(a){a.l=!0;a.k=null;a.proxy=null;a.src=null;a.a=null};function Ea(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Ga(a){var b={},c;for(c in a)b[a[c]]=c;return b}var Ha="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ia(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ha.length;f++)c=Ha[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function M(a){this.src=a;this.a={};this.b=0}M.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g;a:{for(g=0;g<a.length;++g){var h=a[g];if(!h.l&&h.k==b&&h.o==!!d&&h.a==e)break a}g=-1}-1<g?(b=a[g],c||(b.n=!1)):(b=new Ca(b,this.src,f,!!d,e),b.n=c,a.push(b));return b};var N="closure_lm_"+(1E6*Math.random()|0),O={},Ja=0;function P(a,b,c,d,e){if("array"==q(b))for(var f=0;f<b.length;f++)P(a,b[f],c,d,e);else if(c=Ka(c),a&&a[Aa])a.X(b,c,d,e);else{if(!b)throw Error("Invalid event type");var f=!!d,g=La(a);g||(a[N]=g=new M(a));c=g.add(b,c,!1,d,e);c.proxy||(d=Na(),c.proxy=d,d.src=a,d.k=c,a.addEventListener?a.addEventListener(b.toString(),d,f):a.attachEvent(Oa(b.toString()),d),Ja++)}}
function Na(){var a=Pa,b=ya?function(c){return a.call(b.src,b.k,c)}:function(c){c=a.call(b.src,b.k,c);if(!c)return c};return b}function Oa(a){return a in O?O[a]:O[a]="on"+a}function Qa(a,b,c,d){var e=1;if(a=La(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.o==c&&!f.l&&(e&=!1!==Ra(f,d))}return Boolean(e)}
function Ra(a,b){var c=a.k,d=a.a||a.src;if(a.n&&"number"!=typeof a&&a&&!a.l){var e=a.src;if(e&&e[Aa])e.$(a);else{var f=a.type,g=a.proxy;e.removeEventListener?e.removeEventListener(f,g,a.o):e.detachEvent&&e.detachEvent(Oa(f),g);Ja--;if(f=La(e)){g=a.type;if(g in f.a){var h=f.a[g],L=pa(h,a),s;(s=0<=L)&&y.splice.call(h,L,1);s&&(Da(a),0==f.a[g].length&&(delete f.a[g],f.b--))}0==f.b&&(f.src=null,e[N]=null)}else Da(a)}}return c.call(d,b)}
function Pa(a,b){if(a.l)return!0;if(!ya){var c;if(!(c=b))a:{c=["window","event"];for(var d=l,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new K(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.a;f;f=f.parentNode)e.push(f);for(var f=a.type,h=e.length-1;0<=h;h--)c.a=e[h],d&=Qa(e[h],f,!0,c);for(h=0;h<e.length;h++)c.a=e[h],d&=Qa(e[h],f,!1,c)}return d}return Ra(a,
new K(b,this))}function La(a){a=a[N];return a instanceof M?a:null}var Sa="__closure_events_fn_"+(1E9*Math.random()>>>0);function Ka(a){return"function"==q(a)?a:a[Sa]||(a[Sa]=function(b){return a.handleEvent(b)})};var Ta,Ua,Va,Wa,Q,R,S,Xa,T,Ya,U,V,W,Za,$a,X,ab;function Y(a,b){this.a=a;this.b=null;this.h=n(b)?b:null;this.e=!1;this.g=new Cesium.Event;this.c=document.createElement(bb);this.c.width=1;this.c.height=1;P(this.a,"change",function(){cb(this)},!1,this);cb(this)}fa(Y,Cesium.ImageryProvider);
Object.defineProperties(Y.prototype,{ready:{get:function(){return this.e}},rectangle:{get:function(){return this.i}},tileWidth:{get:function(){var a=this.a.getTileGrid();return null===a?256:a.getTileSize(0)}},tileHeight:{get:function(){return this.tileWidth}},maximumLevel:{get:function(){var a=this.a.getTileGrid();return null===a?18:a.getMaxZoom()}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this.d}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this.g}},
credit:{get:function(){return this.f}},proxy:{get:function(){}},hasAlphaChannel:{get:function(){return!0}}});function cb(a){if(!a.e&&"ready"==a.a.getState()){var b=a.a.getProjection();a.b=null!=b?b:a.h;if(a.b==ol.proj.get("EPSG:4326"))a.d=new Cesium.GeographicTilingScheme;else if(a.b==ol.proj.get("EPSG:3857"))a.d=new Cesium.WebMercatorTilingScheme;else return;a.i=a.d.rectangle;b=db(a.a);a.f=null===b?void 0:b;a.e=!0}}
function db(a){var b="",c=a.getAttributions();null===c||A(c,function(a){b+=a.getHTML().replace(/<\/?[^>]+(>|$)/g,"")+" "});var d,e;0==b.length&&(a=a.getLogo(),n(a)&&(r(a)?d=a:(d=a.src,e=a.href)));return n(d)||0<b.length?new Cesium.Credit(b,d,e):null}Y.prototype.getTileCredits=function(){};Y.prototype.getTileCredits=Y.prototype.getTileCredits;
Y.prototype.requestImage=function(a,b,c){var d=this.a.getTileUrlFunction();if(null===d||null===this.b)return this.c;var e=this.d instanceof Cesium.GeographicTilingScheme?c+1:c;b=this.a.getTileGrid()instanceof ol.tilegrid.XYZ?b:b-(1<<c);a=d([e,a,-b-1],1,this.b);return n(a)?Cesium.ImageryProvider.loadImage(this,a):this.c};Y.prototype.requestImage=Y.prototype.requestImage;(function(){function a(a){a=a.getStroke()?a.getStroke().getWidth():1;return Math.min(a,Ta)}function b(a,b){var d=a.getFill()?a.getFill().getColor():null,f=a.getStroke()?a.getStroke().getColor():null,e="black";f&&b?e=f:d&&(e=d);return c(e)}function c(a){a=a||"black";if("array"==q(a))return Cesium.Color.unpack(a);if(r(a))return Cesium.Color.fromCssColorString(a);throw"impossible";}function d(a,b,c){var d;c instanceof Cesium.PrimitiveCollection?d=c:(d=new Cesium.PrimitiveCollection,d.add(c));if(!b.getText())return d;
b=b.getText();(a=Za(a,b))&&d.add(a);return d}function e(c,d,s){var e=b(s,!1);c=f(c,e);e=b(s,!0);s=a(s);d=f(d,e,s);s=new Cesium.PrimitiveCollection;s.add(c);s.add(d);return s}function f(a,b,c){var d={U:!0,q:{S:{enabled:!0}}};n(c)&&(d.q||(d.q={}),d.q.lineWidth=c);c=new Cesium.PerInstanceColorAppearance(d);a=new Cesium.GeometryInstance({geometry:a,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(b)}});return new Cesium.Primitive({u:a,t:c})}function g(a,b){var c=ol.proj.get("EPSG:4326"),
d=ol.proj.get(b);d!==c&&(a=a.clone(),a.transform(d,c));return a}Ua=function(a,b,c){n(c)&&(c=c.getHeight(b),b.height=n(c)?c:0);c=Cesium.Ellipsoid.WGS84;b=c.cartographicToCartesian(b);var d=a.position,e=new Cesium.Cartesian3;c.geocentricSurfaceNormal(d,e);a.lookAt(d,b,e)};Va=function(a,b){if(null===a||null===b)return null;var c=ol.proj.transformExtent(a,b,"EPSG:4326");return Cesium.Rectangle.fromDegrees(c[0],c[1],c[2],c[3])};Wa=function(a,b){if(!(a instanceof ol.layer.Tile))return null;var c=null,c=
a.getSource();if(!(c instanceof ol.source.WMTS)&&c instanceof ol.source.TileImage){var d=c.getProjection();if(null===d)d=b;else if(d!==b)return null;var e=d===ol.proj.get("EPSG:3857"),d=d===ol.proj.get("EPSG:4326");if(e||d)c=new Y(c,b);else return null}else return null;e={};d=a.getExtent();null!=d&&null!==b&&(e.rectangle=Va(d,b));return new Cesium.ImageryLayer(c,e)};Q=function(a,b){var c=a.getOpacity();n(c)&&(b.alpha=c);c=a.getVisible();n(c)&&(b.show=c);c=a.getSaturation();n(c)&&(b.saturation=c);
c=a.getContrast();n(c)&&(b.contrast=c);c=a.getBrightness();n(c)&&(b.brightness=Math.pow(1+parseFloat(c),2))};R=function(a){return 2<a.length?Cesium.Cartesian3.fromDegrees(a[0],a[1],a[2]):Cesium.Cartesian3.fromDegrees(a[0],a[1])};S=function(a){for(var b=R,c=[],d=0;d<a.length;++d)c.push(b(a[d]));return c};Xa=function(a,b,c){a=g(a,b);b=a.getCenter();var f=b.slice();f[0]+=a.getRadius();b=R(b);var f=R(f),p=Cesium.Cartesian3.distance(b,f),f=new Cesium.CircleGeometry({center:b,radius:p});b=new Cesium.CircleOutlineGeometry({center:b,
radius:p});b=e(f,b,c);return d(a,c,b)};T=function(a,b,c){a=g(a,b);var e=S(a.getCoordinates());b=new Cesium.PolylineMaterialAppearance({material:Ya(c,!0)});e=new Cesium.PolylineGeometry({positions:e,vertexFormat:b.vertexFormat});b=new Cesium.Primitive({u:new Cesium.GeometryInstance({geometry:e}),t:b});return d(a,c,b)};U=function(b,c,f){b=g(b,c);var w=b.getLinearRings();c={};for(var p=0;p<w.length;++p){var m=S(w[p].getCoordinates());0==p?c.positions=m:n(c.r)?c.r.push(m):c.r=[m]}w=new Cesium.PolygonGeometry({L:c});
p=a(f);c=new Cesium.PolygonOutlineGeometry({L:c,width:p});c=e(w,c,f);return d(b,f,c)};V=function(a,c,e){a=g(a,c);c=e.getImage().getImage();b(e,!1);var f=R(ol.extent.getCenter(a.getExtent())),p=new Cesium.BillboardCollection;p.add({image:c,position:f});return d(a,e,p)};W=function(a,b,c){function d(a,e){var f=new Cesium.PrimitiveCollection;a.forEach(function(a){f.add(e(a,b,c))});return f}switch(a.getType()){case "MultiPoint":return a=a.getPoints(),d(a,V);case "MultiLineString":return a=a.getLineStrings(),
d(a,T);case "MultiPolygon":return a=a.getPolygons(),d(a,U);default:oa("Unhandled multi geometry type"+a.getType())}};Za=function(c,d){var e=d.getText(),f=new Cesium.LabelCollection,g=R(ol.extent.getCenter(c.getExtent()));f.a=Cesium.Transforms.eastNorthUpToFixedFrame(g);e={positions:Cesium.Cartesian3.ZERO,style:m,fillColor:Ma,outlineColor:I,outlineWidth:z,text:e};0!=d.getOffsetX()&&0!=d.getOffsetY()&&(m=new Cesium.Cartesian2(d.getOffsetX(),d.getOffsetY()),e.Z=m);m=d.getFont();null!=m&&(e.font=m);var m=
void 0;if(d.getFill()){var Ma=b(d,!1);e.fillColor=Ma;m=Cesium.LabelStyle.FILL}if(d.getStroke())var z=a(d),I=b(d,!0),m=Cesium.LabelStyle.OUTLINE;d.getFill()&&d.getStroke()&&(m=Cesium.LabelStyle.FILL_AND_OUTLINE);e.style=m;if(d.getTextAlign()){switch(d.getTextAlign()){case "center":m=Cesium.HorizontalOrigin.CENTER;break;case "left":m=Cesium.HorizontalOrigin.LEFT;break;case "right":m=Cesium.HorizontalOrigin.RIGHT;break;default:throw"unhandled text align "+d.getTextAlign();}e.W=m}if(d.getTextBaseline()){switch(d.getTextBaseline()){case "top":m=
Cesium.VerticalOrigin.TOP;break;case "middle":m=Cesium.VerticalOrigin.CENTER;break;case "bottom":m=Cesium.VerticalOrigin.BOTTOM;break;case "alphabetic":m=Cesium.VerticalOrigin.TOP;break;case "hanging":m=Cesium.VerticalOrigin.BOTTOM;break;default:throw"unhandled text baseline "+d.getTextBaseline();}e.verticalOrigin=m}f.add(e);return f};Ya=function(a,b){var d=a.getFill(),e=a.getStroke();if(b&&!e||!b&&!d)return null;d=b?e.getColor():d.getColor();d=c(d);return b&&e.getLineDash()?Cesium.Material.fromType("Stripe",
{V:!1,repeat:500,T:d,Y:new Cesium.Color(0,0,0,0)}):Cesium.Material.fromType("Color",{color:d})};$a=function(a,b,c){var d=a.getStyleFunction(),e;n(d)&&(e=d(c));null==e&&null!=b&&(e=b(a,c));return n(e)?e[0]:null};X=function(a,b,c,d){var e=a.getGeometry();n(d)&&(e=d);switch(e.getType()){case "GeometryCollection":var f=new Cesium.PrimitiveCollection;e.getGeometries().forEach(function(d){d=X(a,b,c,d);f.add(d)});return f;case "Point":return V(e,c,b);case "Circle":return Xa(e,c,b);case "LineString":return T(e,
c,b);case "Polygon":return U(e,c,b);case "MultiPoint":throw"generalize single point case";case "MultiLineString":return W(e,c,b);case "MultiPolygon":return W(e,c,b);case "LinearRing":throw"Linear ring geometries should only be part of polygon.";default:throw"ol geom type not handled : "+e.getType();}};ab=function(a,b){var c=a.getSource().getFeatures(),d=b.getProjection(),e=b.getResolution(),f=new Cesium.PrimitiveCollection;if(!n(e)||!n(d))return f;for(var g=0;g<c.length;++g){var z=c[g];if(null!=z){var I=
a.getStyleFunction();if(I=$a(z,I,e))z=X(z,I,d),n(z)&&f.add(z)}}return f}})();function Z(a,b){this.c=a;this.f=a.canvas;this.a=a.camera;this.b=b;this.g=ol.proj.getTransform(this.b.getProjection(),"EPSG:4326");this.m=ol.proj.getTransform("EPSG:4326",this.b.getProjection());this.d=this.e=0;this.h=null;this.i=!1;P(this.b,["change:center","change:resolution","change:rotation"],function(){this.i||eb(this)},!1,this)}k=Z.prototype;k.O=function(a){this.b.setRotation(a)};k.G=function(){var a=this.b.getRotation();return n(a)?a:0};k.P=function(a){this.e=a;fb(this)};k.A=function(){return this.e};
k.N=function(a){this.d=a;fb(this);this.j()};k.v=function(){return this.d};k.J=function(a){this.b.setCenter(a)};k.getCenter=function(){return this.b.getCenter()};k.K=function(a){a=this.g(a);a=new Cesium.Cartographic(a[0]*Math.PI/180,a[1]*Math.PI/180,this.s());this.a.position=Cesium.Ellipsoid.WGS84.cartographicToCartesian(a);this.j()};k.H=function(){var a=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.a.position);return this.m([180*a.longitude/Math.PI,180*a.latitude/Math.PI])};
k.M=function(a){var b=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.a.position);b.height=a;this.a.position=Cesium.Ellipsoid.WGS84.cartographicToCartesian(b);this.j()};k.s=function(){return Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.a.position).height};k.I=function(a){a=this.g(a);a=Cesium.Cartographic.fromDegrees(a[0],a[1]);Ua(this.a,a,this.c.globe);this.j()};
function fb(a){var b=a.g(a.b.getCenter()),b=new Cesium.Cartographic(b[0]*Math.PI/180,b[1]*Math.PI/180);if(a.c.globe){var c=a.c.globe.getHeight(b);b.height=n(c)?c:0}a.a.setPositionCartographic(b);b=a.b.getRotation();a.a.twistLeft(n(b)?b:0);a.e&&a.a.lookUp(a.e);a.a.moveBackward(a.d);gb(a,!0)}
function eb(a){var b=a.b.getResolution(),b=n(b)?b:0,c=a.g(a.b.getCenter())[1]*Math.PI/180,d=a.a.frustum.fovy,e=a.b.getProjection().getMetersPerUnit();a.d=b*a.f.height*e*Math.cos(Math.abs(c))/2/Math.tan(d/2);fb(a)}
k.j=function(){this.i=!0;var a=new Cesium.Cartesian2(this.f.width/2,this.f.height/2),b=a=this.c.globe.pick(this.a.getPickRay(a),this.c);if(!b){b=this.a.positionCartographic.clone();if(this.c.globe){var c=this.c.globe.getHeight(b);b.height=n(c)?c:0}b=Cesium.Ellipsoid.WGS84.cartographicToCartesian(b)}this.d=Cesium.Cartesian3.distance(b,this.a.position);b=Cesium.Ellipsoid.WGS84.cartesianToCartographic(b);this.b.setCenter(this.m([180*b.longitude/Math.PI,180*b.latitude/Math.PI]));this.b.setResolution(hb(this,
this.d,b?b.latitude:0));if(a){var d=this.a.position,b=new Cesium.Cartesian3;this.c.globe.ellipsoid.geocentricSurfaceNormal(a,b);c=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(d,a,c);Cesium.Cartesian3.normalize(c,c);d=new Cesium.Cartesian3(-a.y,a.x,0);d=Cesium.Cartesian3.angleBetween(this.a.right,d);a=Cesium.Cartesian3.cross(a,this.a.up,new Cesium.Cartesian3).z;this.b.setRotation(0>a?d:-d);a=Math.acos(Cesium.Cartesian3.dot(b,c));this.e=isNaN(a)?0:a}else this.b.setRotation(this.a.heading),this.e=
-this.a.tilt+Math.PI/2;this.i=!1};function gb(a,b){var c=a.a.viewMatrix;a.h&&a.h.equals(c)||(a.h=c.clone(),!0!==b&&a.j())}function hb(a,b,c){var d=a.a.frustum.fovy,e=a.b.getProjection().getMetersPerUnit();return 2*b*Math.tan(d/2)/e/Math.cos(Math.abs(c))/a.f.height};var ib=!C||C&&9<=G;!D&&!C||C&&C&&9<=G||D&&F("1.9.1");C&&F("9");var bb="CANVAS";function jb(a){var b=document;return r(a)?b.getElementById(a):a}
function kb(a){var b=a||document,c=null;if(b.querySelectorAll&&b.querySelector)c=b.querySelector(".ol-overlaycontainer");else{var d,b=document;a=a||b;if(a.querySelectorAll&&a.querySelector)a=a.querySelectorAll(".ol-overlaycontainer");else if(a.getElementsByClassName){var e=a.getElementsByClassName("ol-overlaycontainer");a=e}else{e=a.getElementsByTagName("*");d={};for(b=c=0;a=e[b];b++){var f=a.className,g;if(g="function"==typeof f.split)g=0<=pa(f.split(/\s+/),"ol-overlaycontainer");g&&(d[c++]=a)}d.length=
c;a=d}c=a[0]}return c||null}function lb(a,b){Ea(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in mb?a.setAttribute(mb[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var mb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function nb(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!ib&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ga(g.name),'"');if(g.type){f.push(' type="',ga(g.type),'"');var h={};Ia(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=e.createElement(f);g&&(r(g)?f.className=g:"array"==q(g)?f.className=g.join(" "):lb(f,g));2<d.length&&ob(e,f,d);return f}
function ob(a,b,c){function d(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];if(!aa(f)||ba(f)&&0<f.nodeType)d(f);else{var g;a:{if(f&&"number"==typeof f.length){if(ba(f)){g="function"==typeof f.item||"string"==typeof f.item;break a}if("function"==q(f)){g="function"==typeof f.item;break a}}g=!1}A(g?qa(f):f,d)}}}function pb(a){if(void 0!=a.nextElementSibling)a=a.nextElementSibling;else for(a=a.nextSibling;a&&1!=a.nodeType;)a=a.nextSibling;return a};function qb(a,b,c){this.d=a;this.c=b;this.b=c;this.a={};P(this.c,["change","add","remove"],function(){rb(this)},!1,this)}
function rb(a){var b=Ga(a.a);a.b.removeAll(!1);var c=a.d.getProjection(),d=u(function(a){if(a instanceof ol.layer.Group){var f=a.getLayers();n(f)&&f.forEach(function(a){d(a)})}else{var g=a[t]||(a[t]=++ca),h=this.a[g];n(h)||(h=Wa(a,c),Q(a,h),null!==h&&(P(a,"change:brightness change:contrast change:hue change:opacity change:saturation change:visible".split(" "),function(){Q(a,h)}),P(a,"change:extent",function(){this.b.remove(h,!0);delete this.a[g];rb(this)},!1,this)),this.a[g]=h);h&&(this.b.add(h),
delete b[h])}},a);a.c.forEach(function(a){a.getSource()instanceof ol.source.TileImage&&d(a)});A(Fa(b),function(a){var b=this.a[a];n(b)&&(delete this.a[a],b.destroy())},a)};function sb(a,b){this.b=b.primitives;Ta=b.maximumAliasedLineWidth;this.c=a;this.a={};var c=a.getLayers();P(c,["change","add","remove"],function(){tb(this)},!1,this)}
function tb(a){var b=a.c.getView();if(null!=b){var c=a.c.getLayers(),d=Ga(a.a);a.b.destroyPrimitives=!1;a.b.removeAll();var e=u(function(a){if(a instanceof ol.layer.Group){var c=a.getLayers();n(c)&&c.forEach(function(a){e(a)})}else{var c=a[t]||(a[t]=++ca),h=this.a[c];if(!n(h)){if(h=ab(a,b))a.on("change:visible",function(){h.show=a.getVisible()});this.a[c]=h}h&&(this.b.add(h),delete d[h])}},a);c.forEach(function(a){a instanceof ol.layer.Vector&&e(a)});Fa(d).forEach(function(a){var b=this.a[a];n(b)&&
(delete this.a[a],b.destroy())},a)}};function $(a,b){this.c=a;this.f=nb("DIV",{style:"position:absolute;top:0;left:0;width:100%;height:100%;visibility:hidden;"});var c=jb(b||null);if(c)c.appendChild(this.f);else{var d=this.c.getViewport();(d=kb(d))&&d.parentNode&&d.parentNode.insertBefore(this.f,d)}this.g=null==c;this.b=nb(bb,{style:"position:absolute;top:0;left:0;width:100%;height:100%;"});this.f.appendChild(this.b);this.e=!1;this.p=[];this.a=new Cesium.Scene({canvas:this.b,scene3DOnly:!0});c=this.a.screenSpaceCameraController;c.inertiaSpin=
0;c.ineartiaTranslate=0;c.inertiaZoom=0;c.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.SHIFT});c.enableLook=!1;this.a.camera.constrainedAxis=Cesium.Cartesian3.UNIT_Z;this.d=new Z(this.a,this.c.getView());this.B=new Cesium.Globe(Cesium.Ellipsoid.WGS84);this.a.globe=this.B;this.a.skyAtmosphere=new Cesium.SkyAtmosphere;c=this.c.getLayers();this.C=new qb(this.c.getView(),c,this.a.imageryLayers);rb(this.C);this.F=new sb(this.c,this.a);tb(this.F);
this.g&&(c=pb(this.b),null!=c&&(c.style.display="none"));eb(this.d);var e=u(function(){this.a.initializeFrame();this.e&&(this.a.render(),gb(this.d));Cesium.requestAnimationFrame(e)},this);Cesium.requestAnimationFrame(e)}function ub(a){var b=a.b.clientWidth,c=a.b.clientHeight;if(a.b.width!==b||a.b.height!==c)a.b.width=b,a.b.height=c,a.a.camera.frustum.aspectRatio=b/c}$.prototype.h=function(){return this.d};$.prototype.i=function(){return this.a};$.prototype.m=function(){return this.e};
$.prototype.D=function(a){this.e=!1!==a;this.f.style.visibility=this.e?"visible":"hidden";if(this.e){if(this.g){var b=this.c.getInteractions();b.forEach(function(a){this.p.push(a)},this);b.clear()}ub(this);eb(this.d)}else this.g&&(b=this.c.getInteractions(),A(this.p,function(a){b.push(a)},this),this.p.length=0),this.d.j()};v("olcs.Camera",Z);Z.prototype.setHeading=Z.prototype.O;Z.prototype.getHeading=Z.prototype.G;Z.prototype.setTilt=Z.prototype.P;Z.prototype.getTilt=Z.prototype.A;Z.prototype.setDistance=Z.prototype.N;Z.prototype.getDistance=Z.prototype.v;Z.prototype.setCenter=Z.prototype.J;Z.prototype.getCenter=Z.prototype.getCenter;Z.prototype.setPosition=Z.prototype.K;Z.prototype.getPosition=Z.prototype.H;Z.prototype.setAltitude=Z.prototype.M;Z.prototype.getAltitude=Z.prototype.s;Z.prototype.lookAt=Z.prototype.I;
Z.prototype.updateView=Z.prototype.j;v("olcs.core.lookAt",Ua);v("olcs.core.extentToRectangle",Va);v("olcs.core.tileLayerToImageryLayer",Wa);v("olcs.core.updateCesiumLayerProperties",Q);v("olcs.core.ol4326CoordinateToCesiumCartesian",R);v("olcs.core.ol4326CoordinateArrayToCesiumCartesians",S);v("olcs.core.olCircleGeometryToCesium",Xa);v("olcs.core.olLineStringGeometryToCesium",T);v("olcs.core.olPolygonGeometryToCesium",U);v("olcs.core.olPointGeometryToCesium",V);
v("olcs.core.olMultiGeometryToCesium",W);v("olcs.core.olGeometry4326TextPartToCesium",Za);v("olcs.core.olStyleToCesium",Ya);v("olcs.core.computePlainStyle",$a);v("olcs.core.olFeatureToCesium",X);v("olcs.core.olVectorLayerToCesium",ab);v("olcs.OLCesium",$);$.prototype.getCamera=$.prototype.h;$.prototype.getCesiumScene=$.prototype.i;$.prototype.getEnabled=$.prototype.m;$.prototype.setEnabled=$.prototype.D;})();
